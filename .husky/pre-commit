echo "Running pre-commit hook..."
# Get the current branch name
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Check if we are on 'dev' or if 'dev' has been merged into the current branch
if [ "$CURRENT_BRANCH" = "dev" ] || git merge-base --is-ancestor dev "$CURRENT_BRANCH"; then
    echo "On 'dev' or 'dev' has been merged. Updating package version..."
    npm version patch --no-git-tag-version 
    git add package.json
else
    echo "Skipping package version update (not on 'dev' and 'dev' not merged)."
fi
exec git diff --cached --name-only | npx cspell "src/**/*.ts" --no-summary --no-progress --no-must-find-files --file-list stdin
npx lint-staged
npm run format
npm run build
# git add package.json
